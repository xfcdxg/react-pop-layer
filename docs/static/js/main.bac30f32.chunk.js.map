{"version":3,"sources":["lib/index.js","App.js","index.js"],"names":["slidePageList","location","window","history","closeSlidePage","slidePages","length","shift","onclose","refreshSlidePageList","filter","o","hash","indexOf","SlidePage","node","children","bgColor","target","enableHash","enableClose","closePosition","closeContainerStyle","closeComponent","style","handleClose","handleContainerClose","Date","now","getAttribute","go","className","addEventListener","setTimeout","ref","_node","setAttribute","push","replace","backgroundColor","React","cloneElement","onClick","PopPage","content","options","mask","maskConfig","props","Mask","DemoPage","color","height","display","justifyContent","alignItems","App","popPage","position","padding","top","alert","count","Page","pageCount","handleShowNestedPage","back","this","handleShowPage","bind","handleShowPageFromLeft","handleShowPageFromUp","handleShowPageFromDown","handleShowPageAndChangeClosePosition","handleShowPageAndCloseCustomize","handleShowPageCloseWithProcess","handleShowPageWithoutClose","handleShowPageWithoutHistory","handleShowPageWithContentClose","Component","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.bac30f32.chunk.js","sourcesContent":["import './index.css'\nimport React from 'react'\nimport Mask from 'react-page-mask'\n\nlet slidePageList = []\nlet location = window.location\nlet history = window.history\n\nconst PopPage = (content, options = {}) => {\n  const { mask = false, maskConfig, ...props } = options || {}\n  Mask(\n    <SlidePage { ...props }>\n      { content }\n    </SlidePage>,\n    {\n      mask,\n      ...maskConfig,\n    }\n  )\n}\n\nconst closeSlidePage = slidePages => {\n  if (slidePages.length > 0) {\n    slidePages.shift().onclose()\n    closeSlidePage(slidePages)\n  }\n}\nconst matchHashWithSlidePage = () => {\n  closeSlidePage(slidePageList.filter(o => location.hash.indexOf(o.hash) < 0))\n  refreshSlidePageList()\n}\nconst refreshSlidePageList = () => {\n  slidePageList = slidePageList.filter(o => location.hash.indexOf(o.hash) >= 0)\n}\n\nconst SlidePage = ({\n  children,\n  bgColor = '#fff',\n  target = 'right',\n  enableHash = true,\n  enableClose = true,\n  closePosition = 'right',\n  closeContainerStyle = {},\n  closeComponent,\n  style = {},\n  handleClose = () => {},\n  handleContainerClose,\n}) => {\n  const hash = Date.now()\n  let node\n  const onclose = () => {\n    if (enableHash) {\n      const hash = node.getAttribute('data-id')\n      if (location.hash.indexOf(hash) >= 0) history.go(-1)\n    }\n    node.className += ' hide'\n    node.addEventListener(\"transitionend\", () => {\n      handleContainerClose()\n      setTimeout(refreshSlidePageList, 0)\n    })\n  }\n\n  const onload = _node => {\n    if(_node) {\n      node = _node\n      if (enableHash) {\n        node.setAttribute('data-id', hash)\n        location.hash += hash\n        slidePageList.push({ node, hash, onclose })\n      }\n      setTimeout(() => {\n        node.className = node.className.replace(' hide', '')\n      }, 50)\n    }\n  }\n\n  return (\n    <div className={ `slide-page-container ${ target } hide` }\n         ref={ onload } style={{ backgroundColor: bgColor, ...style }} >\n      { children && React.cloneElement(children, { handleContainerClose: onclose }) }\n      {\n        enableClose && (\n          <div className={ `close-container ${ closePosition }` } style={ closeContainerStyle }\n               onClick={\n                 () => {\n                   onclose()\n                   typeof handleClose === 'function' && handleClose()\n                 }\n               }\n          >\n            { closeComponent ? (closeComponent) : <span className='slide-page-close'>+</span> }\n          </div>\n        )\n      }\n    </div>\n  )\n}\n\nwindow.addEventListener('hashchange', () => {\n  matchHashWithSlidePage()\n}, false)\n\nexport default PopPage\n","import React from 'react'\nimport popPage from './lib'\n\nimport './App.css';\n\nconst DemoPage = ({ handleContainerClose }) => (\n  <div\n    style={{\n      color: '#fff',\n      height: '100%',\n      display: 'flex',\n      justifyContent: 'center',\n      alignItems: 'center'\n    }}\n  >\n   <span onClick={ handleContainerClose }>点我关闭</span>\n  </div>\n)\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n  componentDidMount() {}\n  handleShowPage() {\n    popPage(<div />, { bgColor: 'green' })\n  }\n  handleShowPageFromLeft() {\n    popPage(<div />, { bgColor: 'red', target: 'left' })\n  }\n  handleShowPageFromUp() {\n    popPage(<div />, { bgColor: 'pink', target: 'up' })\n  }\n  handleShowPageFromDown() {\n    popPage(<div />, { bgColor: 'gray', target: 'down' })\n  }\n  handleShowPageAndChangeClosePosition() {\n    popPage(<div />, { bgColor: 'green', target: 'left', closePosition: 'left' })\n  }\n  handleShowPageAndCloseCustomize() {\n    const closeStyle={\n      position: 'relative',\n      padding: '20px',\n      top: '20px'\n    }\n    popPage(\n      <div />,\n      {\n        bgColor: 'green',\n        closeComponent: <span style={closeStyle}>关闭</span>\n      }\n    )\n  }\n  handleShowPageWithoutHistory() {\n    popPage(<div />, { bgColor: 'green', enableHash: false })\n  }\n  handleShowPageWithoutClose() {\n    popPage(<div />, { bgColor: 'green', enableClose: false })\n  }\n  handleShowPageWithContentClose() {\n    popPage(<DemoPage />, { bgColor: 'black', enableClose: false })\n  }\n  handleShowPageCloseWithProcess() {\n    popPage(<div />, { bgColor: 'black', handleClose: () => alert('正在被关闭') })\n  }\n  handleShowNestedPage(count = 1) {\n    const Page = ({ pageCount }) => (\n      <div>\n        弹出层：{ pageCount }\n        <button onClick={ () => this.handleShowNestedPage(pageCount + 1) }>弹出第{ pageCount + 1 }层</button>\n        <button onClick={ () => window.history.back() }>{ pageCount === 1 ? '关闭' : '返回上一层' }</button>\n      </div>\n    )\n    popPage(<Page pageCount={ count } />)\n  }\n  render() {\n    return (\n      <div>\n        <button onClick={ this.handleShowPage.bind(this) }>右侧弹出Page</button>\n\n        <button onClick={ this.handleShowPageFromLeft.bind(this) }>左侧弹出Page</button>\n\n        <button onClick={ this.handleShowPageFromUp.bind(this) }>上方弹出Page</button>\n\n        <button onClick={ this.handleShowPageFromDown.bind(this) }>下方弹出Page</button>\n\n        <button onClick={ this.handleShowPageAndChangeClosePosition.bind(this) }>改变关闭的位置</button>\n\n        <button onClick={ this.handleShowPageAndCloseCustomize.bind(this) }>自定义关闭按钮</button>\n\n        <button onClick={ this.handleShowPageCloseWithProcess.bind(this) }>关闭后处理逻辑</button>\n\n        <button onClick={ this.handleShowPageWithoutClose.bind(this) }>不展示关闭按钮</button>\n\n        <button onClick={ this.handleShowPageWithoutHistory.bind(this) }>不记录浏览器历史</button>\n\n        <button onClick={ this.handleShowPageWithContentClose.bind(this) }>内嵌页面自定义关闭</button>\n\n        <button onClick={ () => this.handleShowNestedPage() }>多层Page</button>\n\n      </div>\n    )\n  }\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}