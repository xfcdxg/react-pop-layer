"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("./index.css");var _react=_interopRequireDefault(require("react")),_reactPageMask=_interopRequireDefault(require("react-page-mask")),_excluded=["mask","maskConfig"];function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function ownKeys(t,e){var o,r=Object.keys(t);return Object.getOwnPropertySymbols&&(o=Object.getOwnPropertySymbols(t),e&&(o=o.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,o)),r}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(o),!0).forEach(function(e){_defineProperty(t,e,o[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):ownKeys(Object(o)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))})}return t}function _defineProperty(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}function _objectWithoutProperties(e,t){if(null==e)return{};var o,r=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols)for(var n=Object.getOwnPropertySymbols(e),i=0;i<n.length;i++)o=n[i],0<=t.indexOf(o)||Object.prototype.propertyIsEnumerable.call(e,o)&&(r[o]=e[o]);return r}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var o,r={},n=Object.keys(e),i=0;i<n.length;i++)o=n[i],0<=t.indexOf(o)||(r[o]=e[o]);return r}var slidePageList=[],location=window.location,history=window.history,PopPage=function(e,t){var o=t.mask,r=void 0!==o&&o,o=t.maskConfig,t=_objectWithoutProperties(t,_excluded);(0,_reactPageMask.default)(_react.default.createElement(SlidePage,t,e),_objectSpread({mask:r},o))},closeSlidePage=function e(t){0<t.length&&(t.shift().onclose(),e(t))},matchHashWithSlidePage=function(){closeSlidePage(slidePageList.filter(function(e){return location.hash.indexOf(e.hash)<0})),refreshSlidePageList()},refreshSlidePageList=function(){slidePageList=slidePageList.filter(function(e){return 0<=location.hash.indexOf(e.hash)})},SlidePage=function(e){function t(){var e;l&&(e=o.getAttribute("data-id"),0<=location.hash.indexOf(e)&&history.go(-1)),o.className+=" hide",o.addEventListener("transitionend",function(){p(),setTimeout(refreshSlidePageList,0)})}var o,r=e.children,n=e.bgColor,i=void 0===n?"#fff":n,a=e.target,s=void 0===a?"right":a,c=e.enableHash,l=void 0===c||c,d=e.enableClose,u=void 0===d||d,f=e.closePosition,n=void 0===f?"right":f,a=e.closeContainerStyle,c=void 0===a?{}:a,d=e.closeComponent,f=e.style,a=void 0===f?{}:f,f=e.handleClose,h=void 0===f?function(){}:f,p=e.handleContainerClose,g=Date.now();return _react.default.createElement("div",{className:"slide-page-container ".concat(s," hide"),ref:function(e){e&&(o=e,l&&(o.setAttribute("data-id",g),location.hash+=g,slidePageList.push({node:o,hash:g,onclose:t})),setTimeout(function(){o.className=o.className.replace(" hide","")},50))},style:_objectSpread({backgroundColor:i},a)},r&&_react.default.cloneElement(r,{handleContainerClose:t}),u&&_react.default.createElement("div",{className:"close-container ".concat(n),style:c,onClick:function(){t(),"function"==typeof h&&h()}},d||_react.default.createElement("span",{className:"slide-page-close"},"+")))};window.addEventListener("hashchange",function(){matchHashWithSlidePage()},!1);var _default=PopPage;exports.default=_default;